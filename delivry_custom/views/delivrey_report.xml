<odoo>
    <data>
        <template id="qty_uom_picking" inherit_id="stock.report_delivery_document">
            <xpath
                    expr="//table[@name='stock_move_table']" position="replace">
                <table class="table table-sm" t-if="o.state!='done'" name="stock_move_table">
                    <thead>
                        <tr>
                            <th name="th_sm_product">
                                <strong>Product</strong>
                            </th>
                            <th name="th_sm_quantity" class="text-center">
                                <strong>Quantity</strong>
                            </th>
                            <th name="th_sm_uom" class="text-center">
                                <strong>Uom</strong>
                            </th>
                            <th name="th_sm_total" class="text-center">
                                <strong>Total Weight</strong>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="lines" t-value="o.move_ids.filtered(lambda x: x.product_uom_qty)"/>
                        <tr t-foreach="lines" t-as="move">
                            <td>
                                <span t-field="move.product_id"/>
                                <p t-if="move.description_picking != move.product_id.name">
                                    <span t-field="move.description_picking"/>
                                </p>
                            </td>
                            <td class="text-center">
                                <span t-if="move.sales_uom_id.x_kgexch" t-esc="move.quantity_done / move.sales_uom_id.x_kgexch"/>
                            </td>
                            <td class="text-center">
                                <span t-field="move.sales_uom_id"/>
                            </td>
                            <td class="text-center">
                                <span t-field="move.quantity_done"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </xpath>
            <xpath expr="//table[@name='stock_move_line_table']" position="replace">
                <table class="table table-sm mt48" t-if="o.move_line_ids and o.state=='done'"
                       name="stock_move_line_table">
                    <t t-set="has_serial_number" t-value="False"/>
                    <t t-set="has_serial_number" t-value="o.move_line_ids.mapped('lot_id')"
                       groups="stock.group_lot_on_delivery_slip"/>
                    <thead>
                        <tr>
                            <th name="th_sml_product">
                                <strong>Product</strong>
                            </th>
                            <th name="th_sml_quantity" class="text-center">
                                <strong>Quantity</strong>
                            </th>
                            <th name="th_sm_uom" class="text-center">
                                <strong>Uom</strong>
                            </th>
                            <th name="th_sm_total" class="text-center">
                                <strong>Total Weight</strong>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="lines" t-value="o.move_ids.filtered(lambda x: x.product_uom_qty)"/>
                        <tr t-foreach="lines" t-as="move">
                            <td>
                                <span t-field="move.product_id"/>
                                <p t-if="move.description_picking != move.product_id.name">
                                    <span t-field="move.description_picking"/>
                                </p>
                            </td>
                            <td class="text-center">
                                <span t-if="move.sales_uom_id.x_kgexch" t-esc="move.quantity_done / move.sales_uom_id.x_kgexch"/>
                            </td>
                            <td class="text-center">
                                <span t-field="move.sales_uom_id"/>
                            </td>
                            <td class="text-center">
                                <span t-field="move.quantity_done"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </xpath>
        </template>
    </data>
</odoo>